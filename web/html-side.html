<!DOCTYPE html>
<html>

<head>
  <title>Fade2Black Pixel Oyunu Coded By : Shady</title>
  <style>
    #game-container {
      width: 400px;
      height: 400px;
      border: 1px solid #000;
      background-image: url('background.png');
      background-size: cover;
      position: relative;
    }

    .pixel {
      width: 20px;
      height: 20px;
      background-color: #FFF;
      position: absolute;
    }

    .bullet {
      width: 20px;
      height: 20px;
      background-image: url('game2.png');
      background-size: cover;
      position: absolute;
    }
  </style>
</head>

<body>
  <h1>Shady : Pixel Oyunu</h1>

  <div id="game-container"></div>

  <script>
    // Oyun alanı boyutları
    const width = 20;
    const height = 20;

    // Oyun alanı oluşturma
    const gameContainer = document.getElementById('game-container');

    for (let i = 0; i < height; i++) {
      for (let j = 0; j < width; j++) {
        const pixel = document.createElement('div');
        pixel.className = 'pixel';
        pixel.style.left = j * 20 + 'px';
        pixel.style.top = i * 20 + 'px';
        gameContainer.appendChild(pixel);
      }
    }

    // Oyuncu pozisyonu
    let playerX = 0;
    let playerY = 0;

    // Düşman pozisyonları
    let enemyPositions = [
      { x: 5, y: 5, xp: 10 },
      { x: 10, y: 15, xp: 20 },
      { x: 17, y: 8, xp: 15 }
    ];

    // Mermi pozisyonları
    let bullets = [];

    // Deneyim puanı (XP) ve seviye
    let xp = 0;
    let level = 1;
    const xpDisplay = document.createElement('div');
    xpDisplay.innerText = 'XP: 0';
    document.body.appendChild(xpDisplay);
    const levelDisplay = document.createElement('div');
    levelDisplay.innerText = 'Level: 1';
    document.body.appendChild(levelDisplay);

    // Oyuncu hareketleri
    document.addEventListener('keydown', (event) => {
      if (event.key === 'ArrowUp' && playerY > 0) {
        playerY--;
      } else if (event.key === 'ArrowDown' && playerY < height - 1) {
        playerY++;
      } else if (event.key === 'ArrowLeft' && playerX > 0) {
        playerX--;
      } else if (event.key === 'ArrowRight' && playerX < width - 1) {
        playerX++;
      } else if (event.key === 'k') {
        fireBullet();
      }

      updateGame();
    });

    // Oyunu güncelleme
    function updateGame() {
      // Oyuncu pozisyonunu güncelleme
      const pixels = document.getElementsByClassName('pixel');
      for (let i = 0; i < pixels.length; i++) {
        pixels[i].style.backgroundColor = '#FFF';
      }
      const playerIndex = playerY * width + playerX;
      pixels[playerIndex].style.backgroundColor = '#FF0000';

      // Düşmanları kontrol etme
      for (let i = 0; i < enemyPositions.length; i++) {
        const enemy = enemyPositions[i];
        const enemyIndex = enemy.y * width + enemy.x;
        if (enemy.x === playerX && enemy.y === playerY) {
          gameOver();
          return;
        }
        pixels[enemyIndex].style.backgroundColor = '#00FF00';
      }

      // Mermileri güncelleme
      for (let i = 0; i < bullets.length; i++) {
        const bullet = bullets[i];
        bullet.y--;
        const bulletIndex = bullet.y * width + bullet.x;
        if (bullet.y >= 0) {
          pixels[bulletIndex].innerHTML = `<div class="bullet" style="left: ${bullet.x * 20}px; top: ${bullet.y * 20}px;"></div>`;
        } else {
          bullets.splice(i, 1);
          i--;
        }
      }

      // Mermi-düşman çarpışmasını kontrol etme
      for (let i = 0; i < bullets.length; i++) {
        const bullet = bullets[i];
        for (let j = 0; j < enemyPositions.length; j++) {
          const enemy = enemyPositions[j];
          if (bullet.x === enemy.x && bullet.y === enemy.y) {
            bullets.splice(i, 1);
            i--;
            enemy.x = Math.floor(Math.random() * width);
            enemy.y = height - 1;
            xp += enemy.xp;
            xpDisplay.innerText = 'XP: ' + xp;
            checkLevelUp(); // Seviye atlaması kontrolü
            break;
          }
        }
      }

      requestAnimationFrame(updateGame);
    }

    // Mermi ateşleme
    function fireBullet() {
      bullets.push({ x: playerX, y: playerY - 1 });
    }

    // Oyunu bitirme ve tekrar başlatma
    function gameOver() {
      alert('Oyun bitti! Skorunuz: ' + xp);
      resetGame();
    }

    // Oyunu sıfırlama
    function resetGame() {
      playerX = 0;
      playerY = 0;
      bullets = [];
      xp = 0;
      level = 1;
      xpDisplay.innerText = 'XP: 0';
      levelDisplay.innerText = 'Level: 1';
      enemyPositions.forEach((enemy) => {
        enemy.x = Math.floor(Math.random() * width);
        enemy.y = height - 1;
      });
      updateGame();
    }

    // Seviye atlaması kontrolü
    function checkLevelUp() {
      const requiredXp = level * 100; // Her seviye için gereken toplam deneyim puanı
      if (xp >= requiredXp) {
        level++;
        levelDisplay.innerText = 'Level: ' + level;
        levelUp();
      }
    }

    // Seviye atladığında düşmanların deneyim puanını artırma ve yeni düşmanlar ekleme
    function levelUp() {
      enemyPositions.forEach((enemy) => {
        enemy.xp += 10;
      });

      enemyPositions.push(
        { x: 3, y: 6, xp: 30 },
        { x: 15, y: 12, xp: 25 },
        { x: 9, y: 2, xp: 35 }
      );
    }

    // Oyunu başlatma
    updateGame();
  </script>
</body>

</html>
